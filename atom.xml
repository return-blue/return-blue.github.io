<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>PsL blogs</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-09-06T08:20:16.541Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>bash脚本之一键安装二进制myslq5.7</title>
    <link href="http://example.com/2021/09/06/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85mysql-5.7%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%8C%85%E7%9A%84%E8%84%9A%E6%9C%AC/"/>
    <id>http://example.com/2021/09/06/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85mysql-5.7%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%8C%85%E7%9A%84%E8%84%9A%E6%9C%AC/</id>
    <published>2021-09-06T07:54:35.421Z</published>
    <updated>2021-09-06T08:20:16.541Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">SRC_DIR=`<span class="built_in">pwd</span>`</span><br><span class="line">MYSQL=<span class="string">&#x27;mysql-5.7.27-linux-glibc2.12-x86_64.tar.gz&#x27;</span></span><br><span class="line">COLOR=<span class="string">&quot;echo -e \\033[01;31m&quot;</span></span><br><span class="line">END=<span class="string">&#x27;\033[0m&#x27;</span></span><br><span class="line">MYSQL_ROOT_PASSWORD=centos</span><br><span class="line"><span class="function"><span class="title">check</span></span> ()&#123;</span><br><span class="line"><span class="built_in">cd</span>  <span class="variable">$SRC_DIR</span></span><br><span class="line"><span class="keyword">if</span> [ !  -e <span class="variable">$MYSQL</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="variable">$COLOR</span><span class="string">&quot;缺少<span class="variable">$&#123;MYSQL&#125;</span>文件&quot;</span><span class="variable">$END</span></span><br><span class="line">        <span class="variable">$COLOR</span><span class="string">&quot;请将相关软件放在<span class="variable">$&#123;SRC_DIR&#125;</span>目录下&quot;</span><span class="variable">$END</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">elif</span> [ -e /usr/<span class="built_in">local</span>/mysql ];<span class="keyword">then</span></span><br><span class="line">        action <span class="string">&quot;数据库已存在，安装失败&quot;</span> <span class="literal">false</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_mysql</span></span>()&#123;</span><br><span class="line">    <span class="variable">$COLOR</span><span class="string">&quot;开始安装MySQL数据库...&quot;</span><span class="variable">$END</span></span><br><span class="line">     yum  -y -q install numactl-libs   libaio &amp;&gt; /dev/null</span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$SRC_DIR</span></span><br><span class="line">    tar xf <span class="variable">$MYSQL</span> -C /usr/<span class="built_in">local</span>/</span><br><span class="line">    MYSQL_DIR=`<span class="built_in">echo</span> <span class="variable">$MYSQL</span>| sed -nr <span class="string">&#x27;s/^(.*[0-9]).*/\1/p&#x27;</span>`</span><br><span class="line">    ln -s  /usr/<span class="built_in">local</span>/<span class="variable">$MYSQL_DIR</span> /usr/<span class="built_in">local</span>/mysql</span><br><span class="line">    chown -R  root.root /usr/<span class="built_in">local</span>/mysql/</span><br><span class="line">    id mysql &amp;&gt; /dev/null || &#123; useradd -s /sbin/nologin -r  mysql ; action <span class="string">&quot;创建mysql用户&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;PATH=/usr/local/mysql/bin/:$PATH&#x27;</span> &gt; /etc/profile.d/mysql.sh</span><br><span class="line">    .  /etc/profile.d/mysql.sh</span><br><span class="line">    cat &gt; /etc/my.cnf &lt;&lt;-<span class="string">EOF</span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">server-id=1</span></span><br><span class="line"><span class="string">log-bin</span></span><br><span class="line"><span class="string">datadir=/data/mysql</span></span><br><span class="line"><span class="string">socket=/data/mysql/mysql.sock                                                                                                   </span></span><br><span class="line"><span class="string">log-error=/data/mysql/mysql.log</span></span><br><span class="line"><span class="string">pid-file=/data/mysql/mysql.pid</span></span><br><span class="line"><span class="string">[client]</span></span><br><span class="line"><span class="string">socket=/data/mysql/mysql.sock</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">    mysqld --initialize --user=mysql --datadir=/data/mysql </span><br><span class="line">    cp /usr/<span class="built_in">local</span>/mysql/support-files/mysql.server  /etc/init.d/mysqld</span><br><span class="line">    chkconfig --add mysqld</span><br><span class="line">    chkconfig mysqld on</span><br><span class="line">    service mysqld start</span><br><span class="line">    [ $? -ne 0 ] &amp;&amp; &#123; <span class="variable">$COLOR</span><span class="string">&quot;数据库启动失败，退出!&quot;</span><span class="variable">$END</span>;<span class="built_in">exit</span>; &#125;</span><br><span class="line">    MYSQL_OLDPASSWORD=`awk <span class="string">&#x27;/A temporary password/&#123;print $NF&#125;&#x27;</span> /data/mysql/mysql.log`</span><br><span class="line">    mysqladmin  -uroot -p<span class="variable">$MYSQL_OLDPASSWORD</span> password <span class="variable">$MYSQL_ROOT_PASSWORD</span> &amp;&gt;/dev/null</span><br><span class="line">    action <span class="string">&quot;数据库安装完成&quot;</span> </span><br><span class="line">&#125;</span><br><span class="line">check</span><br><span class="line">install_mysql</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;</summary>
      
    
    
    
    
    <category term="bash" scheme="http://example.com/tags/bash/"/>
    
  </entry>
  
  <entry>
    <title>mariadb-源码编译安装</title>
    <link href="http://example.com/2021/09/06/mariadb-%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"/>
    <id>http://example.com/2021/09/06/mariadb-%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/</id>
    <published>2021-09-06T07:54:35.419Z</published>
    <updated>2021-09-07T00:46:27.924Z</updated>
    
    <content type="html"><![CDATA[<p>1.安装相关依赖包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bison bison-devel zlib-devel libcurl-devel libarchive-devel boostdevel  gcc gcc-c++ cmake ncurses-devel gnutls-devel libxml2-devel openssldevel libevent-devel libaio-devel  </span><br></pre></td></tr></table></figure><span id="more"></span><p>2.准备用户和数据目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd -r -s /sbin/nologin -d /data/mysql mysql</span><br><span class="line">mkdir   /data/mysql</span><br><span class="line">chown mysql.mysql /data/mysql</span><br></pre></td></tr></table></figure><p>3.准备源码包编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://downloads.mariadb.org/mariadb/10.2.15/ 下载地址</span></span><br><span class="line">[10:49:47 root@27 ~]<span class="comment">#cd /usr/local/src/</span></span><br><span class="line">[11:45:17 root@27 src]<span class="comment">#tar xvf mariadb-10.2.15.tar.gz</span></span><br><span class="line">[14:07:54 root@27 src]<span class="comment">#cd mariadb-10.2.15</span></span><br><span class="line">[14:49:09 root@27 mariadb-10.2.15]<span class="comment">#cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql -DMYSQL_DATADIR=/data/mysql/ -DSYSCONFDIR=/etc/ -DMYSQL_USER=mysql -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DWITH_PARTITION_STORAGE_ENGINE=1 -DWITHOUT_MROONGA_STORAGE_ENGINE=1 -DWITH_DEBUG=0 -DWITH_READLINE=1 -DWITH_SSL=system -DWITH_ZLIB=system -DWITH_LIBWRAP=0 -DENABLED_LOCAL_INFILE=1 -DMYSQL_UNIX_ADDR=/data/mysql/mysql.sock -DDEFAULT_CHARSET=utf8 \-DDEFAULT_COLLATION=utf8_general_ci</span></span><br><span class="line"></span><br><span class="line">[14:49:09 root@27 mariadb-10.2.15]<span class="comment">#make &amp;&amp; make install</span></span><br><span class="line">[15:04:32 root@27 mariadb-10.2.15]<span class="comment">#echo &#x27;PATH=/app/mysql/bin:$PATH&#x27; &gt; /etc/profile.d/mysql.sh</span></span><br><span class="line">[15:05:27 root@27 mariadb-10.2.15]<span class="comment">#. /etc/profile.d/mysql.sh</span></span><br><span class="line"><span class="comment">#提示：如果出错，执行rm -f CMakeCache.txt</span></span><br></pre></td></tr></table></figure><p>4.生成数据库文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[15:05:27 root@27 mariadb]<span class="comment">#cd /app/mysql/</span></span><br><span class="line">[15:05:27 root@27 mariadb]<span class="comment">#scripts/mysql_install_db --datadir=/data/mysql/ --user=mysql</span></span><br></pre></td></tr></table></figure><p>5.准备配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[15:13:11 root@27 mariadb]<span class="comment">#cp /app/mysql/support-files/my-huge.cnf  /etc/my.cnf</span></span><br></pre></td></tr></table></figure><p>6.准备服务脚本，并启动服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp /app/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">chkconfig --add mysqld</span><br><span class="line">service mysqld start</span><br></pre></td></tr></table></figure><p>7.安全初始化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br><span class="line"><span class="comment">#设置数据库管理员root口令</span></span><br><span class="line"><span class="comment">#禁止root远程登录</span></span><br><span class="line"><span class="comment">#删除anonymous用户帐号</span></span><br><span class="line"><span class="comment">#删除test数据库</span></span><br><span class="line">登录测试 mysql -uroot -p</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;1.安装相关依赖包&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install bison bison-devel zlib-devel libcurl-devel libarchive-devel boostdevel  gcc gcc-c++ cmake ncurses-devel gnutls-devel libxml2-devel openssldevel libevent-devel libaio-devel  &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="MYSQL" scheme="http://example.com/tags/MYSQL/"/>
    
  </entry>
  
  <entry>
    <title>LNMP高可用架构部署</title>
    <link href="http://example.com/2021/09/02/LNMP/"/>
    <id>http://example.com/2021/09/02/LNMP/</id>
    <published>2021-09-02T03:30:09.066Z</published>
    <updated>2021-09-02T04:36:15.178Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LNMP高可用架构"><a href="#LNMP高可用架构" class="headerlink" title="LNMP高可用架构"></a>LNMP高可用架构</h2><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517185758093.png" alt="image-20200517185758093"></p><p>LNMP项目实战：<br>L：Linux（centos 7.6） <a href="http://mirrors.cqu.edu.cn/CentOS/7.6.1810/isos/x86_64/">http://mirrors.cqu.edu.cn/CentOS/7.6.1810/isos/x86_64/</a><br>N：Nginx（1.12.2） <a href="https://nginx.org/en/download.html">https://nginx.org/en/download.html</a><br>M：MySQL（5.6.43） <a href="https://dev.mysql.com/downloads/mysql/5.6.html#downloads">https://dev.mysql.com/downloads/mysql/5.6.html#downloads</a><br>P：PHP（7.2.15） <a href="http://php.net/downloads.php">http://php.net/downloads.php</a><br>Worldpress（5.0.3）：<a href="https://cn.wordpress.org/download/">https://cn.wordpress.org/download/</a></p><span id="more"></span><h2 id="数据库服务器-172-31-7-107"><a href="#数据库服务器-172-31-7-107" class="headerlink" title="数据库服务器 172.31.7.107"></a>数据库服务器 172.31.7.107</h2><p>yum install mysql 或者编译安装 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#mysql-install.sh</span></span><br><span class="line">DIR=`<span class="built_in">pwd</span>`</span><br><span class="line">NAME=<span class="string">&quot;mysql-5.6.34-linux-glibc2.5-x86_64.tar.gz&quot;</span></span><br><span class="line">FULL_NAME=<span class="variable">$&#123;DIR&#125;</span>/<span class="variable">$&#123;NAME&#125;</span></span><br><span class="line">DATA_DIR=<span class="string">&quot;/data/mysql&quot;</span></span><br><span class="line">yum install perl-Data-Dumper  libaio vim gcc gcc-c++ wget autoconf net-tools</span><br><span class="line">lrzsz  -y</span><br><span class="line">yum install curl policycoreutils openssh-server openssh-clients postfix -y</span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$&#123;FULL_NAME&#125;</span> ];<span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;安装文件存在&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;安装文件不存在&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 3</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -h /usr/<span class="built_in">local</span>/mysql ];<span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Mysql 已经安装&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 3</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"> tar xvf <span class="variable">$&#123;FULL_NAME&#125;</span>  -C /usr/<span class="built_in">local</span>/src</span><br><span class="line">  ln -sv /usr/<span class="built_in">local</span>/src/mysql-5.6.34-linux-glibc2.5-x86_64 /usr/<span class="built_in">local</span>/mysql</span><br><span class="line">  <span class="keyword">if</span> id mysql;<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;mysql 用户已经存在，跳过创建用户过程&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">   useradd  -r  -s /sbin/nologin mysql</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span> id mysql;<span class="keyword">then</span></span><br><span class="line"> chown  -R mysql.mysql /usr/<span class="built_in">local</span>/mysql/*</span><br><span class="line">    <span class="keyword">if</span> [ ! -d /data/mysql ];<span class="keyword">then</span></span><br><span class="line">      mkdir -pv /data/mysql &amp;&amp; chown  -R mysql.mysql /data  -R</span><br><span class="line">     /usr/<span class="built_in">local</span>/mysql/scripts/mysql_install_db  --user=mysql --</span><br><span class="line">datadir=/data/mysql  --basedir=/usr/<span class="built_in">local</span>/mysql/</span><br><span class="line">cp /usr/<span class="built_in">local</span>/src/mysql-5.6.34-linux-glibc2.5-x86_64/support-</span><br><span class="line">files/mysql.server /etc/init.d/mysqld</span><br><span class="line">chmod a+x /etc/init.d/mysqld</span><br><span class="line">cp <span class="variable">$&#123;DIR&#125;</span>/my.cnf  /etc/my.cnf</span><br><span class="line">ln -sv /usr/<span class="built_in">local</span>/mysql/bin/mysql /usr/bin/mysql</span><br><span class="line">/etc/init.d/mysqld start</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;MySQL数据目录已经存在,&quot;</span></span><br><span class="line"><span class="built_in">exit</span> 3</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#my.cnf</span></span><br><span class="line">[mysqld]</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">user=mysql</span><br><span class="line">symbolic-links=0</span><br><span class="line">datadir=/data/mysql</span><br><span class="line">innodb_file_per_table=1</span><br><span class="line">[client]</span><br><span class="line">port=3306</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">[mysqld_safe]</span><br><span class="line">log-error=/var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line">pid-file=/tmp/mysql.pid</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">创建WordPress账户</span><br><span class="line">#启动mysql并创建数据库</span><br><span class="line">[root@s2 ~]# /etc/init.d/mysqld start</span><br><span class="line">[root@s2 ~]# ln -sv /data/mysql/mysql.sock /var/lib/mysql/mysql.sock</span><br><span class="line">[root@s2 ~]# /usr/local/mysql/bin/mysql</span><br><span class="line">Welcome to the MySQL monitor. Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.6.43 MySQL Community Server (GPL)</span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line">mysql&gt; CREATE DATABASE wordpress;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON wordpress.* TO &quot;wordpress&quot;@&quot;172.31.7.%&quot;</span><br><span class="line">IDENTIFIED BY &quot;123456&quot;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test |</span><br><span class="line">| wordpress |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">测试</span><br><span class="line">[root@s1 etc]# mysql -uwordpress -h192.168.7.102 -p123456</span><br></pre></td></tr></table></figure><h2 id="NFS服务器-172-31-7-108"><a href="#NFS服务器-172-31-7-108" class="headerlink" title="NFS服务器 172.31.7.108"></a>NFS服务器 172.31.7.108</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum install nfs-utils nfs-server</span><br><span class="line">mkdir /data/wordpress #创建共享目录</span><br><span class="line">vim /etc/exports</span><br><span class="line">/data/wordpress *(rw,root_squash)</span><br><span class="line"></span><br><span class="line">systemctl restart nfs</span><br><span class="line">systemctl enable nfs</span><br></pre></td></tr></table></figure><h2 id="nginx服务器172-31-7-105-172-31-7-106"><a href="#nginx服务器172-31-7-105-172-31-7-106" class="headerlink" title="nginx服务器172.31.7.105 172.31.7.106"></a>nginx服务器172.31.7.105 172.31.7.106</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum  install nfs-utils -y</span><br><span class="line">编译安装或者yum nginx</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="comment"># 运行该脚本之前 请配置好yum源和epel源</span></span><br><span class="line">FILE=nginx-1.16.1.tar.gz</span><br><span class="line">PACKAGE=`<span class="built_in">echo</span> <span class="variable">$FILE</span>| sed -rn <span class="string">&#x27;s/^(.*[0-9.]+)\.[[:alpha:]]+.*$/\1/p&#x27;</span>`</span><br><span class="line">INSTALL_DIR=/apps/<span class="variable">$PACKAGE</span></span><br><span class="line">URL=https://nginx.org/download/<span class="variable">$FILE</span></span><br><span class="line">SUBDIR=`basename <span class="variable">$INSTALL_DIR</span>`</span><br><span class="line">COLOR=<span class="string">&quot;\033[1;$[RANDOM%7+31]m&quot;</span></span><br><span class="line">END=<span class="string">&quot;\033[0m&quot;</span></span><br><span class="line">[ -d <span class="variable">$INSTALL_DIR</span> ] &amp;&amp;  &#123; <span class="built_in">echo</span> <span class="string">&quot;Software installed &quot;</span>;<span class="built_in">exit</span>; &#125;</span><br><span class="line">SUFFIX=`<span class="built_in">echo</span> <span class="variable">$FILE</span> | sed -rn <span class="string">&#x27;s/.*\.([^.]+)$/\1/p&#x27;</span>`</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$COLOR</span> Start install ✧*｡٩(ˊωˋ*)و✧*｡ <span class="variable">$END</span> &quot;</span></span><br><span class="line">sleep 2</span><br><span class="line">yum install -y vim lrzsz tree  psmisc lsof tcpdump wget tar gcc gcc-c++ glibc glibc-devel pcre pcre-devel openssl openssl-devel systemd-devel net-tools iotop bc zip unzip zlib-devel bash-completion nfs-utils automake libxml2 libxml2-devel libxslt libxslt-devel perl perl-ExtUtils-Embed &amp;&gt; /dev/null</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</span><br><span class="line"><span class="comment">#wget $URL</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$SUFFIX</span> <span class="keyword">in</span></span><br><span class="line">gz|bz2|xz)</span><br><span class="line">  tar xf <span class="variable">$FILE</span></span><br><span class="line">  ;;</span><br><span class="line">zip)</span><br><span class="line">  unzip  <span class="variable">$FILE</span></span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;unidentifiable&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 5</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$PACKAGE</span>/</span><br><span class="line">./configure \</span><br><span class="line">--prefix=<span class="variable">$INSTALL_DIR</span> \</span><br><span class="line">--user=nginx \</span><br><span class="line">--group=nginx \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-http_v2_module \</span><br><span class="line">--with-http_realip_module \</span><br><span class="line">--with-http_stub_status_module \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--with-pcre \</span><br><span class="line">--with-stream \</span><br><span class="line">--with-stream_ssl_module \</span><br><span class="line">--with-stream_realip_module</span><br><span class="line">make &amp;&amp; make install &amp;&gt; /dev/null</span><br><span class="line">useradd nginx -s /sbin/nologin -u 2000</span><br><span class="line">chown nginx.nginx -R <span class="variable">$INSTALL_DIR</span></span><br><span class="line">mkdir -pv <span class="variable">$INSTALL_DIR</span>/run/ &amp;&gt; /dev/null</span><br><span class="line">sed -ri <span class="string">&quot;s@^#pid.*@pid <span class="variable">$INSTALL_DIR</span>/run/nginx.pid;@g&quot;</span> <span class="variable">$INSTALL_DIR</span>/conf/nginx.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;PATH=$INSTALL_DIR/sbin:$PATH&#x27;</span> &gt; /etc/profile.d/<span class="variable">$SUBDIR</span>.sh</span><br><span class="line"><span class="built_in">source</span> /etc/profile.d/<span class="variable">$SUBDIR</span>.sh</span><br><span class="line">cat &gt; /usr/lib/systemd/system/nginx.service&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=The nginx HTTP and reverse proxy server</span></span><br><span class="line"><span class="string">After=network.target remote-fs.target nss-lookup.target</span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">Type=forking</span></span><br><span class="line"><span class="string">PIDFile=$INSTALL_DIR/run/nginx.pid</span></span><br><span class="line"><span class="string"># Nginx will fail to start if /run/nginx.pid already exists but has the wrong</span></span><br><span class="line"><span class="string"># SELinux context. This might happen when running nginx -t from the cmdline.</span></span><br><span class="line"><span class="string"># https://bugzilla.redhat.com/show_bug.cgi?id=1268621</span></span><br><span class="line"><span class="string">ExecStartPre=/usr/bin/rm -f $INSTALL_DIR/run/nginx.pid</span></span><br><span class="line"><span class="string">ExecStartPre=$INSTALL_DIR/sbin/nginx -t</span></span><br><span class="line"><span class="string">ExecStart=$INSTALL_DIR/sbin/nginx</span></span><br><span class="line"><span class="string">ExecReload=/bin/kill -s HUP \$MAINPID</span></span><br><span class="line"><span class="string">KillSignal=SIGQUIT</span></span><br><span class="line"><span class="string">TimeoutStopSec=5</span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br><span class="line">systemctl start nginx</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$COLOR</span> installed successfully ლ(╹◡╹ლ)<span class="variable">$END</span>&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">php 编译安装</span><br><span class="line">[root@s1 ~]<span class="comment"># yum -y install wget vim pcre pcre-devel openssl openssl-devel</span></span><br><span class="line">libicu-devel gcc gcc-c++ autoconf libjpeg libjpeg-devel libpng libpng-devel</span><br><span class="line">freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-</span><br><span class="line">devel glib2 glib2-devel ncurses ncurses-devel curl curl-devel krb5-devel</span><br><span class="line">libidn libidn-devel openldap openldap-devel nss_ldap jemalloc-devel cmake</span><br><span class="line">boost-devel bison automake libevent libevent-devel gd gd-devel libtool*</span><br><span class="line">libmcrypt libmcrypt-devel mcrypt mhash libxslt libxslt-devel readline</span><br><span class="line">readline-devel gmp gmp-devel libcurl libcurl-devel openjpeg-devel</span><br><span class="line">[root@s1 src]<span class="comment"># pwd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/src</span><br><span class="line">[root@s1 src]<span class="comment"># tar xf php-7.2.15.tar.gz</span></span><br><span class="line">[root@s1 src]<span class="comment"># cd php-7.2.15</span></span><br><span class="line">[root@s1 php-7.2.15]<span class="comment"># ./configure --prefix=/apps/php --enable-fpm --with-fpm-</span></span><br><span class="line">user=nginx --with-fpm-group=nginx --with-pear --with-curl --with-png-dir --with-</span><br><span class="line">freetype-dir --with-iconv --with-mhash --with-zlib --with-xmlrpc --with-</span><br><span class="line">xsl --with-openssl --with-mysqli --with-pdo-mysql --disable-debug --<span class="built_in">enable</span>-</span><br><span class="line">zip --enable-sockets --enable-soap --enable-inline-optimization --<span class="built_in">enable</span>-</span><br><span class="line">xml --enable-ftp --enable-exif --enable-wddx --enable-bcmath --enable-calendar</span><br><span class="line">--enable-shmop --enable-dba --enable-sysvsem --enable-sysvshm --<span class="built_in">enable</span>-</span><br><span class="line">sysvmsg</span><br><span class="line">[root@s1 php-7.2.15]<span class="comment"># make -j 2</span></span><br><span class="line">[root@s1 php-7.2.15]<span class="comment"># make install</span></span><br><span class="line"><span class="comment">#生成配置文件</span></span><br><span class="line">[root@s1 php-7.2.15]<span class="comment"># cd /apps/php/etc/php-fpm.d/</span></span><br><span class="line">[root@s1 php-fpm.d]<span class="comment"># cp www.conf.default www.conf</span></span><br><span class="line">[root@s1 php-fpm.d]<span class="comment"># cp /usr/local/src/php-7.2.15/php.ini-production /apps/php/etc/php.ini</span></span><br><span class="line">[root@s1 php-fpm.d]<span class="comment"># useradd nginx -s /sbin/nologin -u 1001</span></span><br><span class="line">[root@s1 php-fpm.d]<span class="comment"># grep -v &quot;;&quot; www.conf | grep -v &quot;^$&quot;</span></span><br><span class="line">[www]</span><br><span class="line">user = nginx</span><br><span class="line">group = nginx</span><br><span class="line">listen = 127.0.0.1:9000</span><br><span class="line">listen.allowed_clients = 127.0.0.1</span><br><span class="line">pm = dynamic</span><br><span class="line">pm.max_children = 50</span><br><span class="line">pm.start_servers = 30</span><br><span class="line">pm.min_spare_servers = 30</span><br><span class="line">pm.max_spare_servers = 35</span><br><span class="line">pm.status_path = /pm_status</span><br><span class="line">ping.path = /ping</span><br><span class="line">ping.response = pong</span><br><span class="line">access.log = <span class="built_in">log</span>/<span class="variable">$pool</span>.access.log</span><br><span class="line">slowlog = <span class="built_in">log</span>/<span class="variable">$pool</span>.log.slow</span><br><span class="line">[root@s1 etc]<span class="comment"># mkdir /apps/php/log/ #日志文件路径</span></span><br><span class="line">[root@s1 etc]<span class="comment"># cd /apps/php/etc/</span></span><br><span class="line">[root@s1 etc]<span class="comment"># cp php-fpm.conf.default php-fpm.conf</span></span><br><span class="line"><span class="comment">#检测语法并启动php-fpm：</span></span><br><span class="line">[root@s1 etc]<span class="comment"># /apps/php/sbin/php-fpm -t</span></span><br><span class="line">[06-Mar-2019 18:44:46] NOTICE: configuration file /apps/php/etc/php-fpm.conftest is successful</span><br><span class="line"><span class="comment">#验证php-fpm：</span></span><br><span class="line">[root@s1 etc]<span class="comment"># /apps/php/sbin/php-fpm -c /apps/php/etc/php.ini</span></span><br><span class="line">[root@s1 etc]<span class="comment"># ps -ef | grep php-fpm</span></span><br><span class="line">root 115708 1 0 18:45 ? 00:00:00 php-fpm: master process</span><br><span class="line">(/apps/php/etc/php-fpm.conf)</span><br><span class="line">nginx 115709 115708 0 18:45 ? 00:00:00 php-fpm: pool nginx</span><br><span class="line">nginx 115710 115708 0 18:45 ? 00:00:00 php-fpm: pool nginx</span><br><span class="line">[root@s1 etc]<span class="comment"># netstat -tanlp | grep php-fpm</span></span><br><span class="line">tcp 0 0 127.0.0.1:9000 0.0.0.0:* LISTEN 115708/php-fpm: mas</span><br><span class="line"></span><br><span class="line"><span class="comment">#php测试</span></span><br><span class="line">[root@s1 ~]<span class="comment"># mkdir /data/nginx/wordpress -p</span></span><br><span class="line">[root@s1 ~]<span class="comment"># chown nginx.nginx /apps/nginx /data/nginx/wordpress -R</span></span><br><span class="line"></span><br><span class="line">[root@s1 ~]<span class="comment"># /apps/nginx/sbin/nginx -s reload</span></span><br><span class="line">[root@s1 ~]<span class="comment"># vim /data/nginx/wordpress/index.php</span></span><br><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br><span class="line">?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="haproxy-keepalived服务器172-31-7-101-172-31-7-102"><a href="#haproxy-keepalived服务器172-31-7-101-172-31-7-102" class="headerlink" title="haproxy+keepalived服务器172.31.7.101 172.31.7.102"></a>haproxy+keepalived服务器172.31.7.101 172.31.7.102</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install haproxy keepalived ipvsadm -y</span><br><span class="line"></span><br><span class="line">vim /etc/keepalived/keepalived.conf</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>101配置</p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517184354531.png" alt="image-20200517184354531"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">删除vritual_server 192.168.200.100 443 以下全部内容包括这行</span><br><span class="line"></span><br><span class="line">systemctl restart keepalived</span><br><span class="line">systemctl <span class="built_in">enable</span> keepalived</span><br><span class="line"></span><br><span class="line">检测</span><br><span class="line">用别的服务器ping 172.31.7.249 通了说明没问题</span><br></pre></td></tr></table></figure><p>102配置</p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517184931538.png" alt="image-20200517184931538"></p><p>配置haproxy  使得 nginx通过haproxy访问数据库 </p><p>删除main frontent which proxys to the backends以下内容 并添加如下</p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517195521528.png" alt="image-20200517195521528"></p><p>重启haproxy生效</p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="nginx服务器172-31-7-105-172-31-7-106配置"><a href="#nginx服务器172-31-7-105-172-31-7-106配置" class="headerlink" title="nginx服务器172.31.7.105 172.31.7.106配置"></a>nginx服务器172.31.7.105 172.31.7.106配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">vim /apps/nginx/conf/nginx.conf</span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  auto;</span><br><span class="line">include /apps/nginx/conf/conf.d/*.conf;</span><br><span class="line">server &#123;</span><br><span class="line">listen 80;</span><br><span class="line">server_name www.lizi.net;</span><br><span class="line">location / &#123;</span><br><span class="line">root /data/nginx/wordpress;</span><br><span class="line">index index.php index.html index.htm;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$http_user_agent</span> ~ <span class="string">&quot;ApacheBench|WebBench|TurnitinBot|Sogou web</span></span><br><span class="line"><span class="string">spider|Grid Service&quot;</span>) &#123;</span><br><span class="line"><span class="comment">#proxy_pass http://www.baidu.com;</span></span><br><span class="line"><span class="built_in">return</span> 403;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">location ~ \.php$ &#123;</span><br><span class="line">root /data/nginx/wordpress;</span><br><span class="line">fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">fastcgi_index index.php;</span><br><span class="line">fastcgi_param SCRIPT_FILENAME $document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">include fastcgi_params;</span><br><span class="line">&#125;</span><br><span class="line">error_page 500 502 503 504 /50x.html;</span><br><span class="line">location = /50x.html &#123;</span><br><span class="line">root html;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@s1 ~]<span class="comment"># cd /data/nginx/wordpress/</span></span><br><span class="line">[root@s1 wordpress]<span class="comment"># mv index.php /opt/</span></span><br><span class="line">[root@s1 wordpress]<span class="comment"># unzip wordpress-5.0.3-zh_CN.zip</span></span><br><span class="line">[root@s1 wordpress]<span class="comment"># mv wordpress/* .</span></span><br><span class="line">[root@s1 wordpress]<span class="comment"># mv wordpress wordpress-5.0.3-zh_CN.zip /opt/</span></span><br><span class="line">浏览器输入ip地址或者域名测试www.lizi.net</span><br><span class="line">修改hosts文件 分别使用106 和105 测试wordpress是否正常</span><br><span class="line">写文章测试</span><br><span class="line"></span><br><span class="line">如果有图片将图片放在存储108里面</span><br><span class="line"><span class="built_in">cd</span> /data/nginx/wordpress/wp-content/</span><br><span class="line">scp -r ./* 172.31.7.107:/data/wordpress/</span><br><span class="line"></span><br><span class="line">showmount -e 172.31.7.108<span class="comment"># 查看共享目录</span></span><br><span class="line"></span><br><span class="line">mount -t nfs 172.31.7.108:/data/wordpress /data/nginx/wordpress/wp-content/uploads/</span><br><span class="line"></span><br><span class="line">chown nginx.nginx /data/nginx/ /apps/nginx -R</span><br><span class="line"></span><br><span class="line">vim /etc/fstab</span><br><span class="line">172.31.7.108:/data/wordpress /data/nginx/wordpress/wp-content/uploads/ nfs defaults,_netdev 0 0</span><br><span class="line"></span><br><span class="line">mount -a</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="haproxy-keepalived服务器172-31-7-101-172-31-7-102-1"><a href="#haproxy-keepalived服务器172-31-7-101-172-31-7-102-1" class="headerlink" title="haproxy+keepalived服务器172.31.7.101 172.31.7.102"></a>haproxy+keepalived服务器172.31.7.101 172.31.7.102</h2><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517195725396.png" alt="image-20200517195725396">syste,ct;</p><p>systemctl restart haproxy</p><p> 因为 backup上没有vip 所以会报错需要添加内核参数 建议都添加 以防master挂掉 重启报错</p><p>vim  /etc/sysctl.conf</p><p>net.ipv4.ip_nonlocal_bind = 1</p><p>sysctl -p</p><p>修改host文件 172.31.7.249  <a href="http://www.lizi.net/">www.lizi.net</a>  测试是否成功</p><p>已经完成</p><h2 id="LVS-替换haproxy"><a href="#LVS-替换haproxy" class="headerlink" title="LVS  替换haproxy"></a>LVS  替换haproxy</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">在 105 106 分别运行此脚本绑定vip 临时生效</span><br><span class="line">#!/bin/bash</span><br><span class="line">vip=172.31.7.249</span><br><span class="line">mask=&#x27;255.255.255.255&#x27;</span><br><span class="line">dev=lo:1</span><br><span class="line">case $1 in</span><br><span class="line">start)</span><br><span class="line">echo 1 &gt; /proc/sys/net/ipv4/conf/all/arp_ignore</span><br><span class="line">  echo 1 &gt; /proc/sys/net/ipv4/conf/lo/arp_ignore</span><br><span class="line">  echo 2 &gt; /proc/sys/net/ipv4/conf/all/arp_announce</span><br><span class="line">  echo 2 &gt; /proc/sys/net/ipv4/conf/lo/arp_announce</span><br><span class="line">  ifconfig $dev $vip netmask $You can&#x27;t use &#x27;macro parameter character #&#x27; in</span><br><span class="line">math modemask #broadcast $vip up</span><br><span class="line">  #route add -host $vip dev $dev</span><br><span class="line">  ;;</span><br><span class="line">stop)</span><br><span class="line">  ifconfig $dev down</span><br><span class="line">  echo 0 &gt; /proc/sys/net/ipv4/conf/all/arp_ignore</span><br><span class="line">  echo 0 &gt; /proc/sys/net/ipv4/conf/lo/arp_ignore</span><br><span class="line">  echo 0 &gt; /proc/sys/net/ipv4/conf/all/arp_announce</span><br><span class="line">  echo 0 &gt; /proc/sys/net/ipv4/conf/lo/arp_announce</span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">  echo &quot;Usage: $(basename $0) start|stop&quot;</span><br><span class="line">  exit 1</span><br><span class="line">  ;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bash lvs-dr.sh start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在两台lvs服务器配置</p><p>vim  /etc/keepalived/keepalived.conf</p><p>分别配置</p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517184354531.png" alt="image-20200517184354531"></p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517184931538.png" alt="image-20200517184931538"></p><p>都要添加</p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517204925123.png" alt="image-20200517204925123"></p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517204908566.png" alt="image-20200517204908566"></p><p>重启keepalived</p><p>检测状态</p><p><img src="https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517205426554.png" alt="image-20200517205426554"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;LNMP高可用架构&quot;&gt;&lt;a href=&quot;#LNMP高可用架构&quot; class=&quot;headerlink&quot; title=&quot;LNMP高可用架构&quot;&gt;&lt;/a&gt;LNMP高可用架构&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/return-blue/return-blue.github.io/master/images/LNMP.assets/image-20200517185758093.png&quot; alt=&quot;image-20200517185758093&quot;&gt;&lt;/p&gt;
&lt;p&gt;LNMP项目实战：&lt;br&gt;L：Linux（centos 7.6） &lt;a href=&quot;http://mirrors.cqu.edu.cn/CentOS/7.6.1810/isos/x86_64/&quot;&gt;http://mirrors.cqu.edu.cn/CentOS/7.6.1810/isos/x86_64/&lt;/a&gt;&lt;br&gt;N：Nginx（1.12.2） &lt;a href=&quot;https://nginx.org/en/download.html&quot;&gt;https://nginx.org/en/download.html&lt;/a&gt;&lt;br&gt;M：MySQL（5.6.43） &lt;a href=&quot;https://dev.mysql.com/downloads/mysql/5.6.html#downloads&quot;&gt;https://dev.mysql.com/downloads/mysql/5.6.html#downloads&lt;/a&gt;&lt;br&gt;P：PHP（7.2.15） &lt;a href=&quot;http://php.net/downloads.php&quot;&gt;http://php.net/downloads.php&lt;/a&gt;&lt;br&gt;Worldpress（5.0.3）：&lt;a href=&quot;https://cn.wordpress.org/download/&quot;&gt;https://cn.wordpress.org/download/&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="LNMP" scheme="http://example.com/tags/LNMP/"/>
    
  </entry>
  
  <entry>
    <title>jvm安装以及tomcat安装</title>
    <link href="http://example.com/2021/05/27/jvm%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8Atomcat%E5%AE%89%E8%A3%85/"/>
    <id>http://example.com/2021/05/27/jvm%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8Atomcat%E5%AE%89%E8%A3%85/</id>
    <published>2021-05-27T11:13:20.084Z</published>
    <updated>2021-09-03T03:15:24.240Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[09:32:53 root@centos8 src]<span class="comment">#tar xvf jdk-11.0.7_linux-x64_bin.tar.gz </span></span><br><span class="line">[09:33:38 root@centos8 src]<span class="comment">#ln -sv /usr/local/src/jdk-11.0.7 /usr/local/jdk</span></span><br><span class="line">[09:33:55 root@centos8 src]<span class="comment">#vim /etc/profile</span></span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT=<span class="string">&quot;%F%T`whoami`&quot;</span></span><br><span class="line"><span class="built_in">export</span> exportLANG=<span class="string">&quot;en_US.utf-8&quot;</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/jdk</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">[09:34:40 root@centos8 etc]<span class="comment">#source /etc/profile</span></span><br><span class="line">[09:36:29 root@centos8 etc]<span class="comment">#java -version 查看到信息表示成功</span></span><br><span class="line">java version <span class="string">&quot;11.0.7&quot;</span> 2020-04-14 LTS</span><br><span class="line">Java(TM) SE Runtime Environment 18.9 (build 11.0.7+8-LTS)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.7+8-LTS, mixed mode)</span><br></pre></td></tr></table></figure><span id="more"></span><p>tomcat安装 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">（使用jdk版本为）</span><br><span class="line">[10:04:01 root@centos8 ~]<span class="comment"># java -version</span></span><br><span class="line">openjdk version <span class="string">&quot;1.8.0_252&quot;</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8 .0_252-b09)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.252-b09, mixed mode)</span><br><span class="line">[10:12:15 root@centos8 ~]<span class="comment">#cd /usr/local/src</span></span><br><span class="line">[10:05:30 root@centos8 ~]<span class="comment">#wget http://mirrors.hust.edu.cn/apache/tomcat/tomcat-8/v8.5.55/bin/apache-tomcat-8.5.55.tar.gz</span></span><br><span class="line">[10:07:53 root@centos8 ~]<span class="comment">#tar zxf apache-tomcat-8.5.55.tar.gz</span></span><br><span class="line">[10:12:48 root@centos8 src]<span class="comment">#ln -s apache-tomcat-8.5.55 tomcat</span></span><br><span class="line">[10:12:48 root@centos8 src]<span class="comment">#groupadd tomcat -g 1111</span></span><br><span class="line">[10:12:48 root@centos8 src]<span class="comment">#useradd tomcat -u 1111 -g 1111 -M -s /sbin/nologin</span></span><br><span class="line">[10:12:48 root@centos8 src]<span class="comment">#chown -R tomcat.tomcat /usr/local/src/tomcat</span></span><br><span class="line">[10:41:07 root@centos8 src]<span class="comment">#chown -R tomcat.tomcat /usr/local/src/apache-tomcat-8.5.55/</span></span><br><span class="line">[10:13:17 root@centos8 src]<span class="comment">#vim /usr/lib/systemd/system/tomcat.service</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=Tomcat8</span><br><span class="line">After=syslog.target network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">PIDFile=/usr/<span class="built_in">local</span>/src/tomcat/tomcat.pid</span><br><span class="line">ExecStart=/usr/<span class="built_in">local</span>/src/tomcat/bin/catalina.sh start</span><br><span class="line">ExecStop=/usr/<span class="built_in">local</span>/src/tomcat/bin/catalina.sh stop</span><br><span class="line">ExecReload=/bin/<span class="built_in">kill</span> -s HUP <span class="variable">$MAINPID</span></span><br><span class="line">User=tomcat</span><br><span class="line">group=tomcat</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> systemctl daemon-reload</span><br><span class="line"> systemctl start tomcat</span><br><span class="line"> </span><br><span class="line"> [10:44:47 root@centos8 src]<span class="comment">#ps aux |grep tomcat</span></span><br><span class="line">tomcat     3126  4.8 18.5 2070364 85860 ?       Sl   10:43   0:03 /usr/bin/java -Djava.util.logging.config.file=/usr/<span class="built_in">local</span>/src/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -classpath /usr/<span class="built_in">local</span>/src/tomcat/bin/bootstrap.jar:/usr/<span class="built_in">local</span>/src/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/usr/<span class="built_in">local</span>/src/tomcat -Dcatalina.home=/usr/<span class="built_in">local</span>/src/tomcat -Djava.io.tmpdir=/usr/<span class="built_in">local</span>/src/tomcat/temp org.apache.catalina.startup.Bootstrap start</span><br><span class="line">root       3160  0.0  0.2  12108  1112 pts/0    S+   10:45   0:00 grep --color=auto tomcat</span><br><span class="line"></span><br><span class="line">[10:45:02 root@centos8 src]<span class="comment">#systemctl status tomcat</span></span><br><span class="line">● tomcat.service - Tomcat8</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/tomcat.service; enabled; vendor preset: <span class="built_in">disable</span>&gt;</span><br><span class="line">   Active: active (running) since Wed 2020-05-20 10:43:54 CST; 1min 28s ago</span><br><span class="line">  Process: 3114 ExecStart=/usr/<span class="built_in">local</span>/src/tomcat/bin/catalina.sh start (code=exited, status&gt;</span><br><span class="line"> Main PID: 3126 (java)</span><br><span class="line">    Tasks: 27 (<span class="built_in">limit</span>: 2693)</span><br><span class="line">   Memory: 70.2M</span><br><span class="line">   CGroup: /system.slice/tomcat.service</span><br><span class="line">           └─3126 /usr/bin/java -Djava.util.logging.config.file=/usr/<span class="built_in">local</span>/src/tomcat/conf&gt;</span><br><span class="line"></span><br><span class="line">May 20 10:43:54 centos8 systemd[1]: Starting Tomcat8...</span><br><span class="line">May 20 10:43:54 centos8 systemd[1]: Started Tomcat8.</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[09:32:53 root@centos8 src]&lt;span class=&quot;comment&quot;&gt;#tar xvf jdk-11.0.7_linux-x64_bin.tar.gz &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[09:33:38 root@centos8 src]&lt;span class=&quot;comment&quot;&gt;#ln -sv /usr/local/src/jdk-11.0.7 /usr/local/jdk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[09:33:55 root@centos8 src]&lt;span class=&quot;comment&quot;&gt;#vim /etc/profile&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; HISTTIMEFORMAT=&lt;span class=&quot;string&quot;&gt;&amp;quot;%F%T`whoami`&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; exportLANG=&lt;span class=&quot;string&quot;&gt;&amp;quot;en_US.utf-8&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; JAVA_HOME=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/jdk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; CLASSPATH=.:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/jre/lib/rt.jar:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/dt.jar:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/lib/tools.jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PATH=&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[09:34:40 root@centos8 etc]&lt;span class=&quot;comment&quot;&gt;#source /etc/profile&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[09:36:29 root@centos8 etc]&lt;span class=&quot;comment&quot;&gt;#java -version 查看到信息表示成功&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java version &lt;span class=&quot;string&quot;&gt;&amp;quot;11.0.7&amp;quot;&lt;/span&gt; 2020-04-14 LTS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Java(TM) SE Runtime Environment 18.9 (build 11.0.7+8-LTS)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.7+8-LTS, mixed mode)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="jvm" scheme="http://example.com/tags/jvm/"/>
    
  </entry>
  
</feed>
